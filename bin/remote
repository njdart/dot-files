#!/bin/bash

red="\[\033[0;31\]"
white="\[\033[0;37\]"

flags='-C -o' 


function killRemote {
	if grep --quiet '/home/nic/remote' /etc/mtab; then
		echo "Remote busy, unmounting..."
		fusermount -u /home/nic/remote
	fi
}

case $1 in
aber)
	killRemote
	sshfs nid21@Central.aber.ac.uk:/aber/nid21/ /home/nic/remote/
	;;
42nd)
	killRemote
	sshfs njdart@42nd.org:/home/njdart/ /home/nic/remote/
	;;
kill)
	killRemote
	;;
*)
	killRemote
	toMount=$1:/home/$(echo $1 | egrep -o "[a-zA-Z0-9]+" | head -n 1)/
	echo "Mounting $toMount to /home/nic/remote/" 
	sshfs $toMount /home/nic/remote/
	;;
esac
